---
title: maven
date: 2021-04-18
categories:
 - Java
tags:
 - 打包工具
sidebar: 'auto'
---

---

# 一、maven简介

- maven的本质是一个项目管理工具，将项目开发和管理过程抽象为一个项目对象模型(POM)
- POM(Project Object Model)：项目对象模型
- 作用：
	- 项目构建
	- 依赖管理，方便解决资源间的版本冲突问题
	- 统一开发结构
## 二、maven基础概念
- 仓库：用于存储资源
	- 远程仓库
		- 中央仓库：maven团队维护的资源仓库
		- 私服：部门/公司存储资源的仓库，部分资源来自中央仓库，部分来自于公司本身
	- 本地仓库：自己电脑上存储资源的仓库，通过远程仓库获取资源
- 坐标：maven中的坐标用于描述仓库中资源的位置
	- 组成
		- groupId：定义当前maven隶属组织的名称(常为域名反写)
		- artifictId：定义当前maven项目的名称(通常是模块名称)
		- version：定义当前项目的版本号
## 三、maven项目构建
- maven目录结构
- maven常用构建项目指令
	1. mvn compile	#编译
	2. mvn clean	  #清理
	3. mvn test			#测试
	4. mvn package	#打包
	5. mvn install		#安装到本地仓库
## 四、maven环境配置
1. 下载maven
[下载地址](https://maven.apache.org/download.cgi)
2. 同配置Java方法一样，配置MAVEN_HOME
3. 通过mvn测试结果
4. 在idea中配置maven，由于兼容性问题，在idea中使用3.6.1及以前的老版本
5. 配置maven
6. 建立maven项目
	- 原型建maven项目
	- 原型建web项目
## 五、依赖管理
1. 依赖指当前项目运行所需要的jar包，一个项目可以设置多个依赖。以junit为例，格式如下：
2. 依赖传递
	- 直接传递：在当前项目中通过依赖配置建立的依赖关系
	- 间接传递：被依赖的资源如果依赖了其他资源，那么当前项目就间接依赖了其他资源
3. 依赖冲突问题
	- 路径优先：当出现相同的资源时，层级越深，优先级越低。（即越靠近当前项目，优先级越高）
	- 声明优先：当资源在同层被依赖时，配置靠前的依赖覆盖靠后的依赖。
	- 特殊优先：当同级配置了相同资源的不同版本，后配置的覆盖先配置的（少见，因为一般没人会重复写几个版本的资源）
4. 可选依赖：对外隐藏当前所依赖的资源。
5. 当使用optional标签后，该资源是不会一起被打包给引用资源的。（在框架配置中很常见）
6. 排除依赖：主动断开依赖的资源，被排除的资源不需要指定版本
7. 依赖范围<br>默认情况在哪里都可以使用，可以通过scope标签进行设置
    带有依赖范围的资源在进行传递的过程中，其作用范围会受到影响。
## 六、生命周期
1. Maven构建生命周期描述的是一次构建过程经历了多少个事件。
2. maven对项目构建的生命周期划为3套
	- clean：清理工作，端口，进程等
		- pre-clean：执行一些需要在clean之前完成的工作
		- clean：移除所有上一次构建生成的文件
		- post-clean：执行一些需要在clean之后立刻完成的工作
	- default：核心工作，编译，测试，打包等
- site：产生报告，发布站点
		- pre-site：执行一些需要在生成站点文档之前完成的工作
		- site：生成项目的站点文档
		- post-site：执行一些需要在生成站点文档之后完成的工作，并且为部署做准备
		- site-deploy：将生成的站点文档部署到特定的服务器上面
## 七、插件
- 插件与生命周期内的阶段绑定，在执行到对应生命周期时执行对应插件的功能
- 默认maven在各个生命周期上绑定又预设的功能
- 通过插件可以自定义其他功能